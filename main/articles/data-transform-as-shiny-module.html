<!DOCTYPE html>
<!-- Generated by pkgdown + https://github.com/insightsengineering/r-pkgdown-multiversion -->
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Data Transformations as Shiny Module • teal</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Data Transformations as Shiny Module">
<link rel="stylesheet" href="../consent.css">
<script src="../consent.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">teal</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.15.2.9120</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/getting-started-with-teal.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Get started</h6></li>
    <li><a class="dropdown-item" href="../articles/getting-started-with-teal.html">Getting Started with teal</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Using `teal`</h6></li>
    <li><a class="dropdown-item" href="../articles/filter-panel.html">Filter Panel</a></li>
    <li><a class="dropdown-item" href="../articles/teal-options.html">Modifying a teal Application With R Options</a></li>
    <li><a class="dropdown-item" href="../articles/bootstrap-themes-in-teal.html">Bootstrap Themes in teal</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Data in `teal` apps</h6></li>
    <li><a class="dropdown-item" href="../articles/including-data-in-teal-applications.html">Including Data in teal Applications</a></li>
    <li><a class="dropdown-item" href="../articles/data-as-shiny-module.html">Data as shiny Module</a></li>
    <li><a class="dropdown-item" href="../articles/data-transform-as-shiny-module.html">Data Transformations as Shiny Module</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Extending `teal`</h6></li>
    <li><a class="dropdown-item" href="../articles/creating-custom-modules.html">Creating Custom Modules</a></li>
    <li><a class="dropdown-item" href="../articles/adding-support-for-reporting.html">Adding Support for Reporting to Custom Modules</a></li>
    <li><a class="dropdown-item" href="../articles/decorate-module-output.html">Customizing Module Output</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-technical-blueprint" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Technical blueprint</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-technical-blueprint">
<li><a class="dropdown-item" href="../articles/blueprint/index.html">About blueprint</a></li>
    <li><a class="dropdown-item" href="../articles/blueprint/intro.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/blueprint/actors.html">Actors</a></li>
    <li><a class="dropdown-item" href="../articles/blueprint/dataflow.html">Data flow</a></li>
    <li><a class="dropdown-item" href="../articles/blueprint/product_map.html">Product map</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Features</h6></li>
    <li><a class="dropdown-item" href="../articles/blueprint/input_data.html">Input data</a></li>
    <li><a class="dropdown-item" href="../articles/blueprint/in_app_data.html">In-app data</a></li>
    <li><a class="dropdown-item" href="../articles/blueprint/filter_panel.html">Filter panel</a></li>
    <li><a class="dropdown-item" href="../articles/blueprint/module_encapsulation.html">Module and encapsulation</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reports" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reports</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reports">
<li><a class="dropdown-item" href="../coverage-report/">Coverage report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report/">Unit test report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report-non-cran/">Non-CRAN unit test report</a></li>
  </ul>
</li>
      <div><li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-versions">Versions</a>
    <div class="dropdown-menu" aria-labelledby="dropdown-versions">
    <a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/release-candidate">release-candidate</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/main">main</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/latest-tag">latest-tag</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.15.2">v0.15.2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.15.2-rc1">v0.15.2-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.15.1">v0.15.1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.15.1-rc1">v0.15.1-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.15.0">v0.15.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.15.0-rc1">v0.15.0-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.14.0">v0.14.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.13.0">v0.13.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.12.0">v0.12.0</a>
</div>
</li></div>
</ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/insightsengineering/teal" aria-label="View on Github"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Data Transformations as Shiny Module</h1>
                        <h4 data-toc-skip class="author">NEST
CoreDev</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/teal/blob/main/vignettes/data-transform-as-shiny-module.Rmd" class="external-link"><code>vignettes/data-transform-as-shiny-module.Rmd</code></a></small>
      <div class="d-none name"><code>data-transform-as-shiny-module.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p><code><a href="../reference/teal_transform_module.html">teal_transform_module()</a></code> is a Shiny module that takes
<code>ui</code> and <code>server</code> arguments. When provided,
<code>teal</code> executes data transformations for the specified module
both when it is loaded and whenever the data changes. The
<code>server</code> argument extends the logic behind data
manipulations, while the <code>ui</code> argument adds new UI elements
to the filter panel, managing the transformator inputs.</p>
<p>The main advantage of <code><a href="../reference/teal_transform_module.html">teal_transform_module()</a></code> is its
ability to transform data before passing it to the module. This feature
allows users to extend the default behavior of existing modules by
performing specific data operations on the data within the module.</p>
<p>In version <code>0.16</code>, <code>teal</code> introduced a new
optional argument in <code><a href="../reference/teal_modules.html">teal::module</a></code> named
<code>transformators</code>. This argument allows users to pass a
<code>list</code> of objects of <code>teal_data_module</code> class,
created using the <code><a href="../reference/teal_transform_module.html">teal_transform_module()</a></code> function.</p>
<p>This vignette presents the way on how to manage custom data
transformations in <code>teal</code> apps.</p>
</div>
<div class="section level2">
<h2 id="creating-your-first-custom-data-transformation-module">Creating Your First Custom Data Transformation Module<a class="anchor" aria-label="anchor" href="#creating-your-first-custom-data-transformation-module"></a>
</h2>
<p>Let’s initialize a simple <code>teal</code> app by providing
<code>iris</code> and <code>mtcars</code> as input datasets.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://insightsengineering.github.io/teal/">teal</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/teal_data_module.html">within</a></span><span class="op">(</span><span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/teal_data.html">teal_data</a></span><span class="op">(</span><span class="op">)</span>, <span class="op">{</span></span>
<span>  <span class="va">iris</span> <span class="op">&lt;-</span> <span class="va">iris</span></span>
<span>  <span class="va">mtcars</span> <span class="op">&lt;-</span> <span class="va">mtcars</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/init.html">init</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu">teal</span><span class="fu">::</span><span class="fu"><a href="../reference/example_module.html">example_module</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<iframe src="https://shinylive.io/r/app/#code=NobwRAdghgtgpmAXGKAHVA6ASmANGAYwHsIAXOMpMASzLgCcoDTqA3OAAgB4BaDgMwCuEZtRIAKAJQcAKlgCqAUQA6EADbUARo3oBPceShrJq1QBMopKNz4B3aqQAWtA3CMB9C1am4OIVRwc1PTUAM42QSGhARwwpARQ9OG8sfGJ0RAAviYQqmioEbQO4jFe1gC8HGW4MTBEZoJqcOGVhmqIiHAAHrCoTe51DU1Sqjmq1Pwc4rTkjKLsUtL+EIGhzhC6AILo4vkAJILUvvuhDOz0OZlgmQC6QA" width="150%" height="800px" data-external="1" style="position: relative; z-index:1">
</iframe>
<div class="section level3">
<h3 id="single-transformator">Single transformator<a class="anchor" aria-label="anchor" href="#single-transformator"></a>
</h3>
<p>Next, let’s create a <strong>single transformator</strong> using
<code><a href="../reference/teal_transform_module.html">teal_transform_module()</a></code>. This example enables users to
subset the first <code>n</code> rows of the <code>iris</code> dataset
based on their input.</p>
<p>Here’s how we can implement this:</p>
<ol style="list-style-type: decimal">
<li>
<strong>UI Component</strong>: We create a <code>numericInput</code>
in the <code>ui</code> that allows users to specify the number of rows
they want to display.</li>
<li>
<strong>Server Logic</strong>: In the <code>server</code> function,
we take in a reactive <code>data</code> object, perform the
transformation to extract the first <code>n</code> rows of the
<code>iris</code> dataset, and return the updated reactive
<code>data</code>.</li>
</ol>
<p><em>Note</em>: It is recommended to return <code><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive()</a></code>
with <code><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/teal_data.html">teal_data()</a></code> in <code>server</code> code of a
<code>teal_transform_module</code> as this is more robust for
maintaining the reactivity of Shiny. If you are planning on using
<code><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">eventReactive()</a></code> in the server, the event should include
<code><a href="https://rdrr.io/r/utils/data.html" class="external-link">data()</a></code> <em>(example
<code>eventReactive(list(input$a, data()), {...})</code>)</em>. More in
<a href="https://github.com/insightsengineering/teal/issues/1303#issuecomment-2286239832" class="external-link">this
discussion</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/teal_data_module.html">within</a></span><span class="op">(</span><span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/teal_data.html">teal_data</a></span><span class="op">(</span><span class="op">)</span>, <span class="op">{</span></span>
<span>  <span class="va">iris</span> <span class="op">&lt;-</span> <span class="va">iris</span></span>
<span>  <span class="va">mtcars</span> <span class="op">&lt;-</span> <span class="va">mtcars</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_transformators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/teal_transform_module.html">teal_transform_module</a></span><span class="op">(</span></span>
<span>    label <span class="op">=</span> <span class="st">"Custom transformator for iris"</span>,</span>
<span>    ui <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>      <span class="va">tags</span><span class="op">$</span><span class="fu">div</span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/numericInput.html" class="external-link">numericInput</a></span><span class="op">(</span></span>
<span>          <span class="fu">ns</span><span class="op">(</span><span class="st">"n_rows"</span><span class="op">)</span>,</span>
<span>          <span class="st">"Number of rows to subset"</span>,</span>
<span>          value <span class="op">=</span> <span class="fl">6</span>, min <span class="op">=</span> <span class="fl">1</span>, max <span class="op">=</span> <span class="fl">150</span>, step <span class="op">=</span> <span class="fl">1</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="fu"><a href="../reference/teal_data_module.html">within</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>            <span class="op">{</span></span>
<span>              <span class="va">iris</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">iris</span>, <span class="va">num_rows</span><span class="op">)</span></span>
<span>            <span class="op">}</span>,</span>
<span>            num_rows <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">n_rows</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/init.html">init</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu">teal</span><span class="fu">::</span><span class="fu"><a href="../reference/example_module.html">example_module</a></span><span class="op">(</span>transformators <span class="op">=</span> <span class="va">my_transformators</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<blockquote>
<p><strong><em>Note</em></strong>: It is recommended to return
<code><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive()</a></code> with <code><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/teal_data.html">teal_data()</a></code> in the
<code>server</code> code of a <code>teal_transform_module</code>, as
this approach ensures better robustness in maintaining Shiny’s
reactivity. If you are planning on using <code><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">eventReactive()</a></code> in
the <code>server</code>, make sure the event includes
<code><a href="https://rdrr.io/r/utils/data.html" class="external-link">data()</a></code> <em>(example
<code>eventReactive(list(input$a, data()), {...})</code>)</em>. More in
<a href="https://github.com/insightsengineering/teal/issues/1303#issuecomment-2286239832" class="external-link">this
discussion</a>.</p>
</blockquote>
<iframe src="https://shinylive.io/r/app/#code=NobwRAdghgtgpmAXGKAHVA6ASmANGAYwHsIAXOMpMASzLgCcoDTqA3OAAgB4BaDgMwCuEZtRIAKAJQcAKlgCqAUQA6EACZRSUbnwDu1UgAta48lAA2AfQ1apuDiFUcO1etQDOOl2-dOOMUgIoek9ef0Dg3wgAX0lVVRgAT0tSRgh3fiJ6GE0s0L5zD1JxPzMrVKh0zOzLGCI1QXM4EohnZ3MoACM4cw4AXg5lMABhQXdSIhgOCqqsnIn6ASzvDyHcP2dBan6BYVEJajVpR1a253SvADkAZXFDuNOzrQBzdwASNTYWs7OIQXg3AQAJIQVCCYobH7ndwlSCWehEXS+MCSdaPKGDMCXf7dRZEfgcBFI6ZEDjuQSddxwUhrSFQ1gWQScAYANnsMFoOwAjOyoAAPbkAVgADPZxnBUNy6W0HlDZW1omizlT6OxFgMhCIWAc1PYbFBjtK6g0mtcGGq7rrdlqxBA7qDwfYiOCwaQxXB3O5bYb0Wd6HAmCx2OIThi2vojCZ9XZpVDQ2Gfq4PF5DAG1HcfPY-jB4Yj3PKExxFbGftnc8SBrRXW8IOWooWCz9YtLm+jon4Hg9VGhJWFaAZvhx9Tt9Ur-PVGh6dmVEIg4HzYKgmrUJ01TGkMnNciEdkkUhvqvM8p34hBqAT7eRGKJg5Ifc53MYIIkAILocQ9t5beyflVqh7RGA0QALpAA" width="150%" height="800px" data-external="1" style="position: relative; z-index:1">
</iframe>
</div>
<div class="section level3">
<h3 id="multiple-transformators">Multiple transformators<a class="anchor" aria-label="anchor" href="#multiple-transformators"></a>
</h3>
<p>We could also add <strong>multiple transformators</strong> to the app
by including several instances of <code>teal_transform_module</code> in
a list.</p>
<p>For example, let’s add another transformation to the
<code>mtcars</code> dataset. This transformation creates a new column
containing the <code>rownames</code> of <code>mtcars</code>. Unlike the
previous example, this module does not include any interactive UI
elements.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/teal_data_module.html">within</a></span><span class="op">(</span><span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/teal_data.html">teal_data</a></span><span class="op">(</span><span class="op">)</span>, <span class="op">{</span></span>
<span>  <span class="va">iris</span> <span class="op">&lt;-</span> <span class="va">iris</span></span>
<span>  <span class="va">mtcars</span> <span class="op">&lt;-</span> <span class="va">mtcars</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_transformators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/teal_transform_module.html">teal_transform_module</a></span><span class="op">(</span></span>
<span>    label <span class="op">=</span> <span class="st">"Custom transformator for iris"</span>,</span>
<span>    ui <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>      <span class="va">tags</span><span class="op">$</span><span class="fu">div</span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/numericInput.html" class="external-link">numericInput</a></span><span class="op">(</span></span>
<span>          <span class="fu">ns</span><span class="op">(</span><span class="st">"n_rows"</span><span class="op">)</span>,</span>
<span>          <span class="st">"Number of rows to subset"</span>,</span>
<span>          value <span class="op">=</span> <span class="fl">6</span>, min <span class="op">=</span> <span class="fl">1</span>, max <span class="op">=</span> <span class="fl">150</span>, step <span class="op">=</span> <span class="fl">1</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="fu"><a href="../reference/teal_data_module.html">within</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>            <span class="op">{</span></span>
<span>              <span class="va">iris</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">iris</span>, <span class="va">num_rows</span><span class="op">)</span></span>
<span>            <span class="op">}</span>,</span>
<span>            num_rows <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">n_rows</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/teal_transform_module.html">teal_transform_module</a></span><span class="op">(</span></span>
<span>    label <span class="op">=</span> <span class="st">"Custom transformator for mtcars"</span>,</span>
<span>    ui <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>      <span class="va">tags</span><span class="op">$</span><span class="fu">div</span><span class="op">(</span></span>
<span>        <span class="st">"Adding rownames column to mtcars"</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="fu"><a href="../reference/teal_data_module.html">within</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span>, <span class="op">{</span></span>
<span>            <span class="va">mtcars</span><span class="op">$</span><span class="va">rownames</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span>          <span class="op">}</span><span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/init.html">init</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu">teal</span><span class="fu">::</span><span class="fu"><a href="../reference/example_module.html">example_module</a></span><span class="op">(</span>transformators <span class="op">=</span> <span class="va">my_transformators</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>By using multiple transformators, we can apply different
transformations to different datasets available in the
<code>teal_data</code> object.</p>
<p>In this example, one transformator enables users to subset the
<code>iris</code> dataset interactively, while another automatically
adds row names as a new column in the <code>mtcars</code> dataset.</p>
<p>This approach provides greater flexibility in data preprocessing,
allowing transformations to be tailored to specific datasets for a
specific module.</p>
<iframe src="https://shinylive.io/r/app/#code=NobwRAdghgtgpmAXGKAHVA6ASmANGAYwHsIAXOMpMASzLgCcoDTqA3OAAgB4BaDgMwCuEZtRIAKAJQcAKlgCqAUQA6EACZRSUbnwDu1UgAta48lAA2AfQ1apuDiFUcO1etQDOOl2-dOOMUgIoek9ef0Dg3wgAX0lVVRgAT0tSRgh3fiJ6GE0s0L5zD1JxPzMrVKh0zOzLGCI1QXM4EohnZ3MoACM4cw4AXg5lMABhQXdSIhgOCqqsnIn6ASzvDyHcP2dBan6BYVEJajVpR1a253SvADkAZXFDuNOzrQBzdwASNTYWs7OIQXg3AQAJIQVCCYobH7ndwlSCWehEXS+MCSdaPKGDMCXf7dRZEfgcBFI6ZEDjuQSddxwUhrSFQ1gWQScAYANnsMFoOwAjOyoAAPbkAVgADPZxnBUNy6W0HlDZW1omizlT6OxFgMhCIWAc1PYbFBjtK6g0mtcGGq7rrdlqxBA7qDwfYiOCwaQxXB3O5bYb0Wd6HAmCx2OIThi2vojCZ9XZpVDQ2Gfq4PF5DAG1HcfPY-jB4Yj3PKExxFbGftnc8SBrRXW8IOWooWCz9YtLm+jon5UaUA+U0hk5rV6o1mpCOt1egMhqNxpNpr3qvNltVwkEQrT0Vsdpr9nb7g5pRcwjdLY3nC93p9WN8MUMAIJqT4QZ6ExHQeCeYjmf6tCbLyJDaWNsW6Iqmqm57NqO5WvqPpQsaQ5mqqDCWvYW4QfarpOi6jpkh6XokDBGL+oGbDNPGYYRsYdrRqie6+hiAQru8RKvh6XjMbAHriAxkQnoRL4cTC3EhNIh7yAAMmJJbOK2YYyU2gEdqoDyqGgkphLQBhXvqOz6kq-iDk0ngDGUiCIHAfKwKgTQDiazQzH22S5CEOxJCkc5zE5+ZKfEEDUAS9rkIwojBpIBHuJRiQ3ug4iqW8Wz2LFIEMA80RgNEAC6QA" width="150%" height="800px" data-external="1" style="position: relative; z-index:1">
</iframe>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="nest">
  <p>teal is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer>
</div>





  </body>
</html>
