<!DOCTYPE html>
<!-- Generated by pkgdown + https://github.com/insightsengineering/r-pkgdown-multiversion -->
<html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Including Data in teal Applications â€¢ teal</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Including Data in teal Applications">
<link rel="stylesheet" href="../consent.css">
<script src="../consent.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">teal</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9013</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/getting-started-with-teal.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Get started</h6></li>
    <li><a class="dropdown-item" href="../articles/getting-started-with-teal.html">Getting Started with teal</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Data in `teal` apps</h6></li>
    <li><a class="dropdown-item" href="../articles/including-data-in-teal-applications.html">Including Data in teal Applications</a></li>
    <li><a class="dropdown-item" href="../articles/data-as-shiny-module.html">Data as shiny Module</a></li>
    <li><a class="dropdown-item" href="../articles/filter-panel.html">Filter Panel</a></li>
    <li><a class="dropdown-item" href="../articles/transform-input-data.html">Transform Input Data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Extending `teal`</h6></li>
    <li><a class="dropdown-item" href="../articles/creating-custom-modules.html">Creating Custom Modules</a></li>
    <li><a class="dropdown-item" href="../articles/adding-support-for-reporting.html">Adding Support for Reporting to Custom Modules</a></li>
    <li><a class="dropdown-item" href="../articles/transform-module-output.html">Transform Module Output</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Using `teal`</h6></li>
    <li><a class="dropdown-item" href="../articles/teal-as-a-shiny-module.html">Teal as a Shiny Module</a></li>
    <li><a class="dropdown-item" href="../articles/teal-options.html">Modifying a teal Application With R Options</a></li>
    <li><a class="dropdown-item" href="../articles/bootstrap-themes-in-teal.html">Bootstrap Themes in teal</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-technical-blueprint" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Technical blueprint</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-technical-blueprint">
<li><a class="dropdown-item" href="../articles/blueprint/index.html">About blueprint</a></li>
    <li><a class="dropdown-item" href="../articles/blueprint/intro.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/blueprint/actors.html">Actors</a></li>
    <li><a class="dropdown-item" href="../articles/blueprint/dataflow.html">Data flow</a></li>
    <li><a class="dropdown-item" href="../articles/blueprint/product_map.html">Product map</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Features</h6></li>
    <li><a class="dropdown-item" href="../articles/blueprint/input_data.html">Input data</a></li>
    <li><a class="dropdown-item" href="../articles/blueprint/in_app_data.html">In-app data</a></li>
    <li><a class="dropdown-item" href="../articles/blueprint/filter_panel.html">Filter panel</a></li>
    <li><a class="dropdown-item" href="../articles/blueprint/module_encapsulation.html">Module and encapsulation</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reports" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reports</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reports">
<li><a class="dropdown-item" href="../coverage-report/">Coverage report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report/">Unit test report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report-non-cran/">Non-CRAN unit test report</a></li>
  </ul>
</li>
      <div><li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-versions">Versions</a>
    <div class="dropdown-menu" aria-labelledby="dropdown-versions">
    <a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/release-candidate">release-candidate</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/main">main</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/latest-tag">latest-tag</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v1.0.0">v1.0.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v1.0.0-rc1">v1.0.0-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.16.0">v0.16.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.16.0-rc2">v0.16.0-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.16.0-rc1">v0.16.0-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.15.2">v0.15.2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.15.2-rc1">v0.15.2-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.15.1">v0.15.1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.15.1-rc1">v0.15.1-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.15.0">v0.15.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.15.0-rc1">v0.15.0-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.14.0">v0.14.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.13.0">v0.13.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.12.0">v0.12.0</a>
</div>
</li></div>
</ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/insightsengineering/teal" aria-label="View on Github"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Including Data in teal Applications</h1>
                        <h4 data-toc-skip class="author">NEST
CoreDev</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/teal/blob/main/vignettes/including-data-in-teal-applications.Rmd" class="external-link"><code>vignettes/including-data-in-teal-applications.Rmd</code></a></small>
      <div class="d-none name"><code>including-data-in-teal-applications.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="data-in-teal-applications">Data in <code>teal</code> Applications<a class="anchor" aria-label="anchor" href="#data-in-teal-applications"></a>
</h2>
<p>The <code>teal</code> framework readily accepts general,
non-relational data. Modules defined in the
<code>teal.modules.general</code> package are designed to work well with
that kind of data. Relational data is handled just as well and the
mechanism of passing data to applications is virtually the same. This
includes clinical data that conforms to the <code>ADaM</code> standard.
We are working on making the framework extendable so that support for
other data structures can be added with relative ease. Currently some
support is offered for the <code>MultiAssayExperiment</code> class.</p>
<p>All applications use the <code>teal_data</code> class as a data
container. <code>teal_data</code> objects are passed to
<code>init</code> to build the application, where they are modified by
the filter panel (if applicable) and passed on to modules. Thus, the
first step of building a <code>teal</code> app is creating a
<code>teal_data</code> object.</p>
<div class="section level3">
<h3 id="general-data">General data<a class="anchor" aria-label="anchor" href="#general-data"></a>
</h3>
<p>A <code>teal_data</code> object is created by calling the
<code>teal_data</code> function and passing data objects as
<code>name:value</code> pairs.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://insightsengineering.github.io/teal/">teal</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create teal_data</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/teal_data.html">teal_data</a></span><span class="op">(</span>iris <span class="op">=</span> <span class="va">iris</span>, cars <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span></span></code></pre></div>
<p>Note that <code>iris</code> and <code>cars</code> have been added to
the <code>datanames</code> property of <code>data</code> (see <a href="#teal_data-properties"><code>datanames</code> property</a>).</p>
<p>This is sufficient to run a <code>teal</code> app.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># build app</span></span>
<span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/init.html">init</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu"><a href="../reference/example_module.html">example_module</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># run app</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="reproducible-data">Reproducible data<a class="anchor" aria-label="anchor" href="#reproducible-data"></a>
</h3>
<p>A <code>teal_data</code> object stores data in a separate
environment. Therefore, modifying the stored datasets requires that
processing code be evaluated in that environment. Following that logic,
one can create an empty <code>teal_data</code> object and populate it by
evaluating code. This can be done using the <code>eval_code</code>
function or, more conveniently, using the <code>within</code>
function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create empty object</span></span>
<span><span class="va">data_empty</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/teal_data.html">teal_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># run code in the object</span></span>
<span><span class="va">data_populated_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/teal_data_module.html">eval_code</a></span><span class="op">(</span><span class="va">data_empty</span>, code <span class="op">=</span> <span class="st">"iris &lt;- iris</span></span>
<span><span class="st">                                                  cars &lt;- mtcars"</span><span class="op">)</span></span>
<span><span class="co"># alternative</span></span>
<span><span class="va">data_populated_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/teal_data_module.html">within</a></span><span class="op">(</span><span class="va">data_empty</span>, <span class="op">{</span></span>
<span>  <span class="va">iris</span> <span class="op">&lt;-</span> <span class="va">iris</span></span>
<span>  <span class="va">cars</span> <span class="op">&lt;-</span> <span class="va">mtcars</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>The key difference between <code>eval_code</code> and
<code>within</code> is that the former accepts code as character vector
or language objects (<code>call</code>s and <code>expression</code>s),
while <code>within</code> accepts <em>only</em> inline code. For a
deeper understanding check the low level class <code>?qenv</code> for
more details.</p>
<p>Note that in the first example <code>data</code> was created by
passing data objects. If it can be found on the base environment it will
be processed without errors:</p>
<p><img src="images/show_code_prepro_missing.png" style="display: block; margin: auto; width: 75%"></p>
<p>However, if there isnâ€™t code to generate the object they cannot be
reproduced. This creates an object with an error like in a interactive R
session (and will cause the application to fail). Inspecting object
reveals it:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">data_populated_3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/teal_data_module.html">eval_code</a></span><span class="op">(</span><span class="va">data_empty</span>, code <span class="op">=</span> <span class="st">"D5 &lt;- m"</span><span class="op">)</span></span>
<span><span class="va">data_populated_3</span></span>
<span><span class="co">#&gt; &lt;qenv.error: object 'm' not found </span></span>
<span><span class="co">#&gt;  when evaluating qenv code:</span></span>
<span><span class="co">#&gt; D5 &lt;- m&gt;</span></span></code></pre></div>
<p>The necessary code can be supplied to the <code>code</code> argument
of the to the <code>eval_code</code> function .</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_populated_4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/teal_data_module.html">eval_code</a></span><span class="op">(</span><span class="va">data_empty</span>, code <span class="op">=</span> <span class="st">"D5 &lt;- diag(5)"</span><span class="op">)</span></span>
<span><span class="va">data_populated_4</span></span>
<span><span class="co">#&gt; âœ…ï¸Ž code verified</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB; font-weight: bold;">&lt;environment: 0x5593d91a5d90&gt;</span> ðŸ”’ </span></span>
<span><span class="co">#&gt; Parent: &lt;environment: package:teal&gt; </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Bindings:</span></span></span>
<span><span class="co"><span style="font-weight: bold;">#&gt; </span>- D5: [matrix]</span></span></code></pre></div>
<p>As you can see above the output shows that is a verified object. On
an application we donâ€™t see that message but the reproducible code will
be shown, as we can see using the <code>data_populated_2</code>
object:</p>
<p><img src="images/show_code_prepro_present.png" style="display: block; margin: auto; width: 75%"></p>
<div class="section level4">
<h4 id="code-from-file">code from file<a class="anchor" aria-label="anchor" href="#code-from-file"></a>
</h4>
<p>The ability to pass code as a character vector to
<code>eval_code</code> opens the door to using code stored in a
file.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># not run</span></span>
<span><span class="va">data_from_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/teal_data.html">teal_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">data_from_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/teal_data_module.html">eval_code</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="st">"&lt;path_to_file&gt;"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="creating-data-in-app">Creating data in-app<a class="anchor" aria-label="anchor" href="#creating-data-in-app"></a>
</h3>
<p>The one departure from passing a <code>teal_data</code> object to
<code>init</code> is when the data does not exist in the environment
where the app is run, <em>e.g.</em> when it has to be pulled from a
remote source. In those cases a <code>teal_data_module</code> must be
used. See <a href="data-as-shiny-module.html">this vignette</a> for a
detailed description.</p>
<p><br></p>
</div>
</div>
<div class="section level2">
<h2 id="clinical-data">Clinical data<a class="anchor" aria-label="anchor" href="#clinical-data"></a>
</h2>
<p>Currently <code>teal</code> supports two specialized data
formats.</p>
<div class="section level3">
<h3 id="adam-data">
<code>ADaM</code> data<a class="anchor" aria-label="anchor" href="#adam-data"></a>
</h3>
<p>The <code>ADaM</code> data model, defined in CDISC standards,
specifies relationships between the subject-level parent dataset and
observation-level child datasets. The <code>cdisc_data</code> function
takes advantage of that fact to automatically set default joining keys
(see <a href="#join_keys"><code>join_keys</code> property</a>). In the
example below, two standard <code>ADaM</code> datasets
(<code>ADSL</code> and <code>ADTTE</code>) are passed to
<code>cdisc_data</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create cdisc_data</span></span>
<span><span class="va">data_cdisc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/cdisc_data.html">cdisc_data</a></span><span class="op">(</span>ADSL <span class="op">=</span> <span class="fu">teal.data</span><span class="fu">::</span><span class="va"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/random_cdisc_data.html">rADSL</a></span>, ADTTE <span class="op">=</span> <span class="fu">teal.data</span><span class="fu">::</span><span class="va"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/random_cdisc_data.html">rADSL</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data_cdisc</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "ADSL"  "ADTTE"</span></span>
<span><span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/join_keys.html">join_keys</a></span><span class="op">(</span><span class="va">data_cdisc</span><span class="op">)</span></span>
<span><span class="co">#&gt; A join_keys object containing foreign keys between 2 datasets:</span></span>
<span><span class="co">#&gt; ADSL: [STUDYID, USUBJID]</span></span>
<span><span class="co">#&gt;   &lt;-- ADTTE: [STUDYID, USUBJID]</span></span>
<span><span class="co">#&gt; ADTTE: [STUDYID, USUBJID, PARAMCD]</span></span>
<span><span class="co">#&gt;   --&gt; ADSL: [STUDYID, USUBJID]</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/init.html">init</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data_cdisc</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu"><a href="../reference/example_module.html">example_module</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="multiassayexperiment-data">
<code>MultiAssayExperiment</code> data<a class="anchor" aria-label="anchor" href="#multiassayexperiment-data"></a>
</h3>
<p>The <code>MultiAssayExperiment</code> package offers a data structure
for representing and analyzing multi-omics experiments that involve
multi-modal, high-dimensionality data, such as DNA mutations, protein or
RNA abundance, chromatin occupancy, etc., in the same biological
specimens.</p>
<p>The <code>MultiAssayExperiment</code> class is described in detail <a href="https://www.bioconductor.org/packages/release/bioc/vignettes/MultiAssayExperiment/inst/doc/MultiAssayExperiment.html" class="external-link">here</a>.</p>
<p><code>MultiAssayExperiment</code> objects (MAEs) are placed in
<code>teal_data</code> just like normal objects.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://waldronlab.io/MultiAssayExperiment/" class="external-link">MultiAssayExperiment</a></span><span class="op">)</span></span>
<span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">miniACC</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_mae</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/teal_data.html">teal_data</a></span><span class="op">(</span>MAE <span class="op">=</span> <span class="va">miniACC</span><span class="op">)</span></span>
<span></span>
<span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/init.html">init</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data_mae</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu"><a href="../reference/example_module.html">example_module</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span></code></pre></div>
<p>Due to the unique structure of a MAE, <code>teal</code> requires
special considerations when building <code>teal</code> modules.
Therefore, we cannot guarantee that all modules will work properly with
MAEs. The package <a href="https://insightsengineering.github.io/teal.modules.hermes/latest-tag/"><code>teal.modules.hermes</code></a>
has been developed specifically with MAE in mind and will be more
reliable.</p>
<p>The filter panel supports MAEs out of the box.</p>
<p><br></p>
</div>
</div>
<div class="section level2">
<h2 id="teal_data-properties">
<code>teal_data</code> properties<a class="anchor" aria-label="anchor" href="#teal_data-properties"></a>
</h2>
<div class="section level5">
<h5 id="join_keys">
<code>join_keys</code><a class="anchor" aria-label="anchor" href="#join_keys"></a>
</h5>
<p>Using relational data requires specifying joining keys for each pair
of datasets. Primary keys are unique row identifiers in individual
datasets and thus should be specified for each dataset. Foreign keys
describe mapping of variables between datasets. Joining keys are stored
in the <code>join_keys</code> property, which can be set when creating a
<code>teal_data</code> object, using the <code>join_keys</code>
argument, or using the <code>join_keys</code> function.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ds1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>  group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">ds2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>,</span>
<span>  condition <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"condition1"</span>, <span class="st">"condition2"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">keys</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/join_keys.html">join_keys</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/join_key.html">join_key</a></span><span class="op">(</span><span class="st">"DS1"</span>, keys <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/join_key.html">join_key</a></span><span class="op">(</span><span class="st">"DS2"</span>, keys <span class="op">=</span> <span class="st">"group"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/join_key.html">join_key</a></span><span class="op">(</span><span class="st">"DS1"</span>, <span class="st">"DS2"</span>, keys <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"group"</span> <span class="op">=</span> <span class="st">"group"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">data_relational1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/teal_data.html">teal_data</a></span><span class="op">(</span>DS1 <span class="op">=</span> <span class="va">ds1</span>, DS2 <span class="op">=</span> <span class="va">ds2</span>, join_keys <span class="op">=</span> <span class="va">keys</span><span class="op">)</span></span>
<span><span class="va">data_relational2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/teal_data.html">teal_data</a></span><span class="op">(</span>DS1 <span class="op">=</span> <span class="va">ds1</span>, DS2 <span class="op">=</span> <span class="va">ds2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/join_keys.html">join_keys</a></span><span class="op">(</span><span class="va">data_relational2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">keys</span></span></code></pre></div>
<p>For a detailed explanation of join keys, see <a href="https://insightsengineering.github.io/teal.data/latest-tag/articles/join-keys.html">this
<code>teal.data</code> vignette</a>.</p>
<p><a href="#adam-data">(back to <code>ADaM</code> Data)</a></p>
</div>
<div class="section level5">
<h5 id="verified">
<code>verified</code><a class="anchor" aria-label="anchor" href="#verified"></a>
</h5>
<p><code>teal_data</code> allows for tracking code from data creation
through data filtering through data analysis so that the whole process
can be reproduced. The <code>verified</code> property designates whether
or not reproducibility has been confirmed. <code>teal_data</code>
objects that are created empty and only modified by evaluating code
within them are considered verified by default. Those created with data
objects alone or with data objects and code are not verified by default,
but can become verified by running the <code>verify</code> function.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_with_objects_and_code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/teal_data.html">teal_data</a></span><span class="op">(</span>iris <span class="op">=</span> <span class="va">iris</span>, cars <span class="op">=</span> <span class="va">mtcars</span>, code <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="va">iris</span> <span class="op">&lt;-</span> <span class="va">iris</span>, <span class="va">cars</span> <span class="op">&lt;-</span> <span class="va">mtcars</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">data_with_objects_and_code</span></span>
<span><span class="co">#&gt; âœ– code unverified</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB; font-weight: bold;">&lt;environment: 0x5593dbe39988&gt;</span> ðŸ”’ </span></span>
<span><span class="co">#&gt; Parent: &lt;environment: package:teal&gt; </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Bindings:</span></span></span>
<span><span class="co"><span style="font-weight: bold;">#&gt; </span>- cars: [data.frame]</span></span>
<span><span class="co">#&gt; - iris: [data.frame]</span></span>
<span></span>
<span><span class="va">data_with_objects_and_code_ver</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/verify.html">verify</a></span><span class="op">(</span><span class="va">data_with_objects_and_code</span><span class="op">)</span></span>
<span><span class="va">data_with_objects_and_code_ver</span></span>
<span><span class="co">#&gt; âœ…ï¸Ž code verified</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB; font-weight: bold;">&lt;environment: 0x5593dbe39988&gt;</span> ðŸ”’ </span></span>
<span><span class="co">#&gt; Parent: &lt;environment: package:teal&gt; </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Bindings:</span></span></span>
<span><span class="co"><span style="font-weight: bold;">#&gt; </span>- cars: [data.frame]</span></span>
<span><span class="co">#&gt; - iris: [data.frame]</span></span></code></pre></div>
<p>For a detailed explanation of verification, see <a href="https://insightsengineering.github.io/teal.data/latest-tag/articles/teal-data-reproducibility.html">this
<code>teal.data</code> vignette</a>.</p>
<p><a href="#reproducible-data">(back to Reproducible Data)</a></p>
<p><br></p>
</div>
<div class="section level5">
<h5 id="hidden-datasets">Hidden datasets<a class="anchor" aria-label="anchor" href="#hidden-datasets"></a>
</h5>
<p>Objects which name starts with a dot (.) are hidden in teal_data and
the whole teal application. This can be used to pass auxiliary objects
in the <code>teal_data</code> instance, without exposing them to the app
user. For example:</p>
<ul>
<li>Proxy variables for column modifications</li>
<li>Temporary datasets used to create final ones</li>
<li>Connection objects</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/teal_data.html">teal_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">my_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/teal_data_module.html">within</a></span><span class="op">(</span><span class="va">my_data</span>, <span class="op">{</span></span>
<span>  <span class="va">.data1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, x <span class="op">=</span> <span class="fl">11</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span></span>
<span>  <span class="va">.data2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, y <span class="op">=</span> <span class="fl">11</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span></span>
<span>  <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">.data1</span>, <span class="va">.data2</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/ls.html" class="external-link">ls</a></span><span class="op">(</span><span class="va">my_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "data"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">my_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "data"</span></span>
<span></span>
<span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/init.html">init</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">my_data</span>, modules <span class="op">=</span> <span class="fu"><a href="../reference/example_module.html">example_module</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<p>For a complete guide to the <code>teal_data</code> class, please
refer to the <a href="https://insightsengineering.github.io/teal.data/latest-tag/"><code>teal.data</code>
package</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="nest">
  <p>teal is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer>
</div>





  </body>
</html>
