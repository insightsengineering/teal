<!DOCTYPE html>
<!-- Generated by pkgdown + https://github.com/insightsengineering/r-pkgdown-multiversion -->
<html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Transform Module Output • teal</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Transform Module Output">
<link rel="stylesheet" href="../consent.css">
<script src="../consent.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">teal</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/getting-started-with-teal.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Get started</h6></li>
    <li><a class="dropdown-item" href="../articles/getting-started-with-teal.html">Getting Started with teal</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Data in `teal` apps</h6></li>
    <li><a class="dropdown-item" href="../articles/including-data-in-teal-applications.html">Including Data in teal Applications</a></li>
    <li><a class="dropdown-item" href="../articles/data-as-shiny-module.html">Data as shiny Module</a></li>
    <li><a class="dropdown-item" href="../articles/filter-panel.html">Filter Panel</a></li>
    <li><a class="dropdown-item" href="../articles/transform-input-data.html">Transform Input Data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Extending `teal`</h6></li>
    <li><a class="dropdown-item" href="../articles/creating-custom-modules.html">Creating Custom Modules</a></li>
    <li><a class="dropdown-item" href="../articles/adding-support-for-reporting.html">Adding Support for Reporting to Custom Modules</a></li>
    <li><a class="dropdown-item" href="../articles/transform-module-output.html">Transform Module Output</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Using `teal`</h6></li>
    <li><a class="dropdown-item" href="../articles/teal-as-a-shiny-module.html">Teal as a Shiny Module</a></li>
    <li><a class="dropdown-item" href="../articles/teal-options.html">Modifying a teal Application With R Options</a></li>
    <li><a class="dropdown-item" href="../articles/bootstrap-themes-in-teal.html">Bootstrap Themes in teal</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-technical-blueprint" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Technical blueprint</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-technical-blueprint">
<li><a class="dropdown-item" href="../articles/blueprint/index.html">About blueprint</a></li>
    <li><a class="dropdown-item" href="../articles/blueprint/intro.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/blueprint/actors.html">Actors</a></li>
    <li><a class="dropdown-item" href="../articles/blueprint/dataflow.html">Data flow</a></li>
    <li><a class="dropdown-item" href="../articles/blueprint/product_map.html">Product map</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Features</h6></li>
    <li><a class="dropdown-item" href="../articles/blueprint/input_data.html">Input data</a></li>
    <li><a class="dropdown-item" href="../articles/blueprint/in_app_data.html">In-app data</a></li>
    <li><a class="dropdown-item" href="../articles/blueprint/filter_panel.html">Filter panel</a></li>
    <li><a class="dropdown-item" href="../articles/blueprint/module_encapsulation.html">Module and encapsulation</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reports" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reports</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reports">
<li><a class="dropdown-item" href="../coverage-report/">Coverage report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report/">Unit test report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report-non-cran/">Non-CRAN unit test report</a></li>
  </ul>
</li>
      <div><li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-versions">Versions</a>
    <div class="dropdown-menu" aria-labelledby="dropdown-versions">
    <a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/release-candidate">release-candidate</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/main">main</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/latest-tag">latest-tag</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v1.1.0">v1.1.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v1.0.0">v1.0.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v1.0.0-rc1">v1.0.0-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.16.0">v0.16.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.16.0-rc2">v0.16.0-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.16.0-rc1">v0.16.0-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.15.2">v0.15.2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.15.2-rc1">v0.15.2-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.15.1">v0.15.1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.15.1-rc1">v0.15.1-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.15.0">v0.15.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.15.0-rc1">v0.15.0-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.14.0">v0.14.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.13.0">v0.13.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal/v0.12.0">v0.12.0</a>
</div>
</li></div>
</ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/insightsengineering/teal" aria-label="View on Github"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Transform Module Output</h1>
                        <h4 data-toc-skip class="author">NEST
CoreDev</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/teal/blob/main/vignettes/transform-module-output.Rmd" class="external-link"><code>vignettes/transform-module-output.Rmd</code></a></small>
      <div class="d-none name"><code>transform-module-output.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The outputs produced by <code>teal</code> modules, like graphs or
tables, are created by the module developer and look a certain way. It
is hard to design an output that will satisfy every possible user, so
the form of the output should be considered a default value that can be
customized. In <a href="transform-input-data.html">Transform Input
Data</a> we described how <code>teal_module</code>’s input data can be
modified using <code>teal_transform_module</code>. Here we present how
to utilize <code>teal_transform_module</code> to modify an output
created by a <code>teal_module</code>, enabling you to tailor outputs to
your specific requirements without rewriting the original module
code.</p>
<p><img src="images/teal-transform-module-decorators.svg" alt="Transforming teal_data" style="width: 100%;"></p>
</div>
<div class="section level2">
<h2 id="how-to-transform-outputs">How to Transform outputs?<a class="anchor" aria-label="anchor" href="#how-to-transform-outputs"></a>
</h2>
<p>Custom transformations for the output objects can be created with
<code><a href="../reference/teal_transform_module.html">teal_transform_module()</a></code> and thus they are
<code>shiny</code> modules. They are passed to <code>teal_module</code>
constructors as arguments (see below). Their server logic will be used
to modify objects such as plots or tables that exist in the server
function of a <code>teal_module</code>. A <code>ui</code> function can
provide interactivity but that is optional, an app developer is free to
transform outputs objects of a <code>teal</code> module that do not
require user input.</p>
<div class="section level3">
<h3 id="requirements-and-limitations">Requirements and Limitations<a class="anchor" aria-label="anchor" href="#requirements-and-limitations"></a>
</h3>
<p>Transforming <code>teal</code> module output requires the
following:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Module Support</strong>:<br><code>teal</code> will apply
transformations to <code>teal_module</code> outputs, but the module in
question must explicitly support this functionality. It is the
responsibility of to the module developer to accept and consume the list
of <code>teal_transform_module</code>.</li>
<li>
<strong>Matching Object Names</strong>:<br> Transformations have to
reference variables that already exist in the <code>teal_module</code>
server function and therefore must use the appropriate variable names.
Think of it as extending the plot/table code that already exists in the
module. Module developers are encouraged to provide the relevant names
in the module’s documentation, otherwise the person writing the output
transformation must follow the source code.</li>
<li>
<strong>Maintaining Object Classes</strong>:<br> A transformation
must not alter the class of the object that it modifies. This is because
a different class may require a different rendering function and that is
part of the module structure, which beyond the control of decorators. If
change of this magnitude is required, it is recommended to create a new
module.</li>
</ol>
</div>
</div>
<div class="section level2">
<h2 id="building-output-transformations-decorators">Building Output Transformations (Decorators)<a class="anchor" aria-label="anchor" href="#building-output-transformations-decorators"></a>
</h2>
<p>For simplicity, we will refer to the output transformers as
<strong>decorators</strong> in the code examples below.</p>
<div class="section level3">
<h3 id="server">Server<a class="anchor" aria-label="anchor" href="#server"></a>
</h3>
<p>Here we create a simple transformator that does not provide any user
input. Knowing that the module contains an object of class
<code>ggplot2</code> named <code>plot</code>, we will modify its title
and x-axis title:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">static_decorator</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/teal_transform_module.html">teal_transform_module</a></span><span class="op">(</span></span>
<span>  label <span class="op">=</span> <span class="st">"Static decorator"</span>,</span>
<span>  server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="fu"><a href="../reference/teal_data_module.html">within</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span>, <span class="op">{</span></span>
<span>          <span class="va">plot</span> <span class="op">&lt;-</span> <span class="va">plot</span> <span class="op">+</span></span>
<span>            <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"This is a better title"</span><span class="op">)</span> <span class="op">+</span></span>
<span>            <span class="fu">xlab</span><span class="op">(</span><span class="st">"the real x axis"</span><span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="ui">UI<a class="anchor" aria-label="anchor" href="#ui"></a>
</h3>
<p>If the transformation requires a user input, a <code>ui</code>
function can be added. Here, the x-axis title is obtained from a
<code>textInput</code> widget, giving the user some flexibility. Note
how the input values are passed to the <code><a href="../reference/teal_data_module.html">within()</a></code> function
using its <code>...</code> argument. See
<code><a href="https://insightsengineering.github.io/teal.code/latest-tag/reference/within.qenv.html">?teal.code::within.qenv</a></code> for more examples.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">interactive_decorator</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/teal_transform_module.html">teal_transform_module</a></span><span class="op">(</span></span>
<span>  label <span class="op">=</span> <span class="st">"Interactive decorator"</span>,</span>
<span>  ui <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textInput.html" class="external-link">textInput</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"x_axis_title"</span><span class="op">)</span>, <span class="st">"X axis title"</span>, value <span class="op">=</span> <span class="st">"the suggested x axis"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span>,</span>
<span>  server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="fu"><a href="../reference/teal_data_module.html">within</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>          <span class="op">{</span></span>
<span>            <span class="va">plot</span> <span class="op">&lt;-</span> <span class="va">plot</span> <span class="op">+</span></span>
<span>              <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"This is a better title"</span><span class="op">)</span> <span class="op">+</span></span>
<span>              <span class="fu">xlab</span><span class="op">(</span><span class="va">my_title</span><span class="op">)</span></span>
<span>          <span class="op">}</span>,</span>
<span>          my_title <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">x_axis_title</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="variable-names-as-arguments">Variable Names as Arguments<a class="anchor" aria-label="anchor" href="#variable-names-as-arguments"></a>
</h3>
<p>The server function of a transforming
<code>teal_transform_module</code> must conform to the names of the
variables that exist in the server function of the transformed
<code>teal_module</code>. Writing a universal transformator that applies
to any module is impossible because different modules may use different
variable names for their output elements. It is possible, however, to
create a transformator that will take the relevant variable names as
arguments. Here, the <code>output_name</code> variable name is passed to
a transformator, allowing it to work with multiple modules.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dynamic_decorator</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">output_name</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/teal_transform_module.html">teal_transform_module</a></span><span class="op">(</span></span>
<span>    label <span class="op">=</span> <span class="st">"Dynamic decorator"</span>,</span>
<span>    ui <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textInput.html" class="external-link">textInput</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"x_axis_title"</span><span class="op">)</span>, <span class="st">"X axis title"</span>, value <span class="op">=</span> <span class="st">"the syggested x axis"</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>          <span class="fu"><a href="../reference/teal_data_module.html">within</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>            <span class="op">{</span></span>
<span>              <span class="va">output_name</span> <span class="op">&lt;-</span> <span class="va">output_name</span> <span class="op">+</span></span>
<span>                <span class="fu">xlab</span><span class="op">(</span><span class="va">x_axis_title</span><span class="op">)</span></span>
<span>            <span class="op">}</span>,</span>
<span>            output_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/name.html" class="external-link">as.name</a></span><span class="op">(</span><span class="va">output_name</span><span class="op">)</span>,</span>
<span>            x_axis_title <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">x_axis_title</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Note that when the function is used, <code>output_name</code> will be
passed a character string but the expression passed to
<code>within</code> needs a <code>name</code>/<code>symbol</code>, a
language object, hence the argument value must be converted to a
<code>name</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="using-output-transformations-decorators">Using Output Transformations (Decorators)<a class="anchor" aria-label="anchor" href="#using-output-transformations-decorators"></a>
</h2>
<p>Transformations are applied to a <code>teal</code> module as
follows:</p>
<ol style="list-style-type: decimal">
<li>A list of transformations is passed to the module constructor
function (<em>e.g.</em> <code>tm_my_module</code>).</li>
<li>The module constructor calls the module generator function
(<code><a href="../reference/teal_modules.html">teal::module</a></code>) and passes the transformations to the
<code>ui_args</code> and <code>server_args</code> arguments.</li>
<li>The module functions, UI and server, take a list of transformations
as arguments and resolve them using <code>ui_transform_teal_data</code>
and <code>srv_transform_teal_data</code>, respectively.</li>
</ol>
<p>Here is a minimal illustration:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># styler: off</span></span>
<span><span class="va">pseudo_decorated_module</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span></span>
<span>  <span class="va">label</span> <span class="op">=</span> <span class="st">"Pseudo Module with Decorator Support"</span>,</span>
<span>  <span class="va">decorators</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>                                                       <span class="co"># &lt;--- added block (1)</span></span>
<span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/teal_modules.html">module</a></span><span class="op">(</span></span>
<span>    label <span class="op">=</span> <span class="va">label</span>,</span>
<span>    ui_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>decorators <span class="op">=</span> <span class="va">decorators</span><span class="op">)</span>,                                  <span class="co"># &lt;--- added block (2)</span></span>
<span>    server_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>decorators <span class="op">=</span> <span class="va">decorators</span><span class="op">)</span>,                              <span class="co"># &lt;--- added block (2)</span></span>
<span>    ui <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">decorators</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>        <span class="co"># &lt;input widgets&gt;,</span></span>
<span>        <span class="co"># &lt;output widgets&gt;,</span></span>
<span>        <span class="fu"><a href="../reference/module_transform_data.html">ui_transform_teal_data</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"decorate"</span><span class="op">)</span>, transformators <span class="op">=</span> <span class="va">decorators</span><span class="op">)</span>   <span class="co"># &lt;--- added block (3)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">data</span>, <span class="va">decorators</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="co"># &lt;receive inputs&gt;</span></span>
<span>        <span class="co"># &lt;process data&gt;</span></span>
<span>        <span class="va">data_with_output</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="fu"><a href="../reference/teal_data_module.html">within</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">output_item</span> <span class="op">&lt;-</span> <span class="fu">generate_output</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span>        <span class="va">data_with_output_decorated</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/module_transform_data.html">srv_transform_teal_data</a></span><span class="op">(</span>                <span class="co"># &lt;--- added block (3)</span></span>
<span>          <span class="st">"decorate"</span>,                                                         <span class="co"># &lt;-</span></span>
<span>          data <span class="op">=</span> <span class="va">data_with_output</span>,                                            <span class="co"># &lt;-</span></span>
<span>          transformators <span class="op">=</span> <span class="va">decorators</span>                                         <span class="co"># &lt;-</span></span>
<span>        <span class="op">)</span>                                                                     <span class="co"># &lt;--- added block (3)</span></span>
<span>        <span class="co"># &lt;render output&gt;</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co"># styler: on</span></span></code></pre></div>
<p>The following examples demonstrate various uses of output
transformations.</p>
<div class="section level3">
<h3 id="single-transformation-decoration">Single Transformation (Decoration)<a class="anchor" aria-label="anchor" href="#single-transformation-decoration"></a>
</h3>
<p>In the first example we will apply one transformation to one
output.</p>
</div>
<div class="section level3">
<h3 id="module">Module<a class="anchor" aria-label="anchor" href="#module"></a>
</h3>
<p>This module has one output, a plot created with <code>ggplot2</code>,
and it displays the reproducible code used to obtain the plot.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tm_decorated_plot</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">label</span> <span class="op">=</span> <span class="st">"module"</span>, <span class="va">decorators</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">checkmate</span><span class="fu">::</span><span class="fu"><a href="https://mllg.github.io/checkmate/reference/checkList.html" class="external-link">assert_list</a></span><span class="op">(</span><span class="va">decorators</span>, <span class="st">"teal_transform_module"</span>, null.ok <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="../reference/teal_modules.html">module</a></span><span class="op">(</span></span>
<span>    label <span class="op">=</span> <span class="va">label</span>,</span>
<span>    ui_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>decorators <span class="op">=</span> <span class="va">decorators</span><span class="op">)</span>,</span>
<span>    server_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>decorators <span class="op">=</span> <span class="va">decorators</span><span class="op">)</span>,</span>
<span>    ui <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">decorators</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html" class="external-link">selectInput</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"dataname"</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"select dataname"</span>, choices <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html" class="external-link">selectInput</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"x"</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"select x"</span>, choices <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html" class="external-link">selectInput</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"y"</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"select y"</span>, choices <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="../reference/module_transform_data.html">ui_transform_teal_data</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"decorate"</span><span class="op">)</span>, transformators <span class="op">=</span> <span class="va">decorators</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/plotOutput.html" class="external-link">plotOutput</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"plot"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textOutput.html" class="external-link">verbatimTextOutput</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"text"</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">data</span>, <span class="va">decorators</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span>, <span class="op">{</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/updateSelectInput.html" class="external-link">updateSelectInput</a></span><span class="op">(</span>inputId <span class="op">=</span> <span class="st">"dataname"</span>, choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">dataname</span>, <span class="op">{</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">dataname</span><span class="op">)</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/updateSelectInput.html" class="external-link">updateSelectInput</a></span><span class="op">(</span>inputId <span class="op">=</span> <span class="st">"x"</span>, choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="va">input</span><span class="op">$</span><span class="va">dataname</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/updateSelectInput.html" class="external-link">updateSelectInput</a></span><span class="op">(</span>inputId <span class="op">=</span> <span class="st">"y"</span>, choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="va">input</span><span class="op">$</span><span class="va">dataname</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>        <span class="va">dataname</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">dataname</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">x</span>, <span class="va">input</span><span class="op">$</span><span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="fu">dataname</span><span class="op">(</span><span class="op">)</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>          <span class="va">input</span><span class="op">$</span><span class="va">x</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span>        <span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">y</span>, <span class="va">input</span><span class="op">$</span><span class="va">y</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="fu">dataname</span><span class="op">(</span><span class="op">)</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>          <span class="va">input</span><span class="op">$</span><span class="va">y</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>        <span class="co"># Plot is created within the teal_data object</span></span>
<span>        <span class="va">data_with_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="fu">dataname</span><span class="op">(</span><span class="op">)</span>, <span class="fu">x</span><span class="op">(</span><span class="op">)</span>, <span class="fu">y</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>          <span class="fu"><a href="../reference/teal_data_module.html">within</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>            <span class="op">{</span></span>
<span>              <span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">dataname</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>                <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span></span>
<span>            <span class="op">}</span>,</span>
<span>            dataname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/name.html" class="external-link">as.name</a></span><span class="op">(</span><span class="fu">dataname</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>            x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/name.html" class="external-link">as.name</a></span><span class="op">(</span><span class="fu">x</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>            y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/name.html" class="external-link">as.name</a></span><span class="op">(</span><span class="fu">y</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>        <span class="co"># Decorators are applied</span></span>
<span>        <span class="va">data_with_plot_decorated</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/module_transform_data.html">srv_transform_teal_data</a></span><span class="op">(</span></span>
<span>          <span class="st">"decorate"</span>,</span>
<span>          data <span class="op">=</span> <span class="va">data_with_plot</span>,</span>
<span>          transformators <span class="op">=</span> <span class="va">decorators</span></span>
<span>        <span class="op">)</span></span>
<span></span>
<span>        <span class="co"># (Decorated) plot object is extracted for rendering</span></span>
<span>        <span class="va">plot_r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="fu">data_with_plot_decorated</span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="st">"plot"</span><span class="op">]</span><span class="op">]</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>        <span class="co"># Add plot printing statement to reproducible code</span></span>
<span>        <span class="co">## This does not affect the analysis but when the code is "replayed"</span></span>
<span>        <span class="co">## in an interactive session it will send the plot to a graphics device.</span></span>
<span>        <span class="va">reproducible_code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="fu"><a href="../reference/teal_data_module.html">within</a></span><span class="op">(</span><span class="fu">data_with_plot_decorated</span><span class="op">(</span><span class="op">)</span>, expr <span class="op">=</span> <span class="va">plot</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>            <span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="https://insightsengineering.github.io/teal.code/latest-tag/reference/get_code.html">get_code</a></span><span class="op">(</span><span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>        <span class="va">output</span><span class="op">$</span><span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html" class="external-link">renderPlot</a></span><span class="op">(</span><span class="fu">plot_r</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="va">output</span><span class="op">$</span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPrint.html" class="external-link">renderText</a></span><span class="op">(</span><span class="fu">reproducible_code</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="section level4">
<h4 id="application">Application<a class="anchor" aria-label="anchor" href="#application"></a>
</h4>
<p>Note that every call to the module constructor
(<code>tm_decorated_plot</code>) takes a list containing <em>one</em>
transformator.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/init.html">init</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/teal_data.html">teal_data</a></span><span class="op">(</span>iris <span class="op">=</span> <span class="va">iris</span>, mtcars <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu"><a href="../reference/teal_modules.html">modules</a></span><span class="op">(</span></span>
<span>    <span class="fu">tm_decorated_plot</span><span class="op">(</span><span class="st">"undecorated"</span><span class="op">)</span>,</span>
<span>    <span class="fu">tm_decorated_plot</span><span class="op">(</span><span class="st">"static"</span>, decorators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">static_decorator</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="fu">tm_decorated_plot</span><span class="op">(</span><span class="st">"interactive"</span>, decorators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">interactive_decorator</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="fu">tm_decorated_plot</span><span class="op">(</span><span class="st">"dynamic"</span>, decorators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu">dynamic_decorator</span><span class="op">(</span><span class="st">"plot"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<iframe src="https://shinylive.io/r/app/#code=NobwRAdghgtgpmAXGKAHVA6ASmANGAYwHsIAXOMpMASzLgCcoDTqA3OAAgB4BaDgMwCuEZtRIAKAJQcAKlgCqAUQA6EADbUARo3oBPceShrJqjdqh7xAcyuo1RUgCYTEAM6koLAgH0AJnGJGUiJ6bj5DNW9SRjd+EJhvGCJfQTU4cVUODjUoTTg1DgBeDmUwAGUPLw5-QM8Q0txMjlcGdlDioREWCWpfXGrPKGkQJqyklLSy1oZxXv7O0R6IVEFSfqJVlbXmuFdXMQhh0ayOejgmFnZxEYgTu9O4AEdxX0GpF3uTgHdqUgALWgvN6Sfo3T53OwOMIcSGkDgAamO4I4NhYpDSGTAMgBrg41FxUA4eVI5FCaLSpWkiNuyJOAA8cppMf9OGcjBw6RwoHT8ZSkScAL4fe5C46imkC1QuWiki5sOB+AIhOqhXgcCJRGKuOL0BLjVLpJqM-JFEpgACSdEYonY1SVQXqeCagmopoW3Qgs18RxpWTc0IAcmUvcKsr42BlfSdyHTSJatuI3Ji6d5ufior8KWAQWaABpcnm48lwBocVhGQScYqlFnNQQ2XbkXwcgu87PHYUCxo0lr0Npu4SLT1zAYeH13fWTab0L3zQce2bLVbrTbLnZ7A7j+5sm3pMHgs7PV4ed78rI-f6A49QKTd2kcff32HQ5-U+93VGZw1YnF4glEuASQYdUv0pBEz3BBlcnEGBdAzdE4FDcEuwgsY4OLU1aC2AASFM01ceCKSjO4kKycU7nIjhJUOVRfF0aAYGoHwamVYJVT4d0DnEDZSC2bwGMQh8mg1aIoFieJEmSA1IzuY0CmrMAABF6NgJi7VqNiGmOF0By6Ljei3O5-TVIMQ35cNWBk8EYzjJdSETVxk1TQtCJLbN+lKfN8JAhDS3LNRK1NGs-k4VxdAbdw4GbTl8L5YiOCQlCo17fsOnnfS+lHIYhPiyc4CmPsZhHTili2FdeLXFoNxIQzt3OXdrlQh4j2BUj7gvAFPWvW8mqyR93x4viBOhQbVn42BODfd87igpk8Jc4s2s+JLptG0hxvgU0oFcDABO41d1oEkFeo5Zz0ww4osNWXCzoI4smqWqi2sosimhcajSASFigii7xnzVErPTkoKwDy0tvpVXFig0dx3hyrICBCggAGsYE8OBEEQbbe3WmH7IhtjXA8sARK1HU9SkrN+ggVI1AwIhkdNOQlBcJo8qsrJgeh3J8jvE4XVTegrCh7J8Xx+1IdNAmQlcY7kunQXhdNPGXglwmpbVmW5buHS0r0npMul+hZfh+5jL4UyDPMiMIJaNJmHjVYHMxa8BMpfoubNO2AjhV2JtLRGiCY3ZTQDeQABlw+18FvYduzndKOl3eyHn5K9-IfY5AO-iDggQ+KMPI+jz5Y9shMk1KXRk890pS44Ku8A4QPg5Fwuo75z4BdE8TdSic5Im6iuwAJtyc277V4kl4ojdljv7lhAB5A6E7AWFKWL+42k0TxqBgGQ4FjJeKvsoebPX-lErnlLgL1odZyy-oZ9qsZKfy6d78Bxcyo4Nb+iq-Yaqm0+EQTQ19FDsDIECE8OZ+qd1QMeN+9sy5OyunGZsCk-bwGzrnfOHABKOW6pIIhEFxQQRAWAiB9lUHYUwXAUETVDxf2urQx6WRBDwPRlMJBjsqF2XNOgs0SdG7NzziLYgah8FQJvJIYAwBqG0IALoKOIfFHWHDyBcJ9jwphaCQYN36CI3B4jJGENkfIwYAklEqORKQ1RWVhpqh3JcdIjDzEeCOo9Tkjj6rOManYrIri7K4X6NQzkABSWgYSm5EAkRNAhwJZG0KkFY1heIglJzsS9e4uhoROPlH4+8gScK6BCUEnJESIBROMXEqRUhEkWImsk5RqTqFV0yazOxABiDgAAFewcJ8RNzZE2DgHVaDqhCuqfufhBg-00AAKx9hBa83gOp-X6bknx+TYF1Rau4xpOY6S3nrqefxozfidVqRvZEOzkT-T4DYWEjhMaPP6VIgS-RXkOGeVjXY4hOTFDpP0HJxRdBEPAmcz4XynAvLgEQBIqAg6QNSWROeyJaFbR2ntJJRC0WQUxbtRpRzcUnRBVyLFjT9DWNpI9WxyJumKU1sbLkZwuToA0FFZZgxVkXPWQ4RUGkorQlcH2TUYkJ69w1N1JqpQR5aTOdeKW3K1mwjxXcce5Mp7qVYjLCCHT6UcHEIywV3oYQbJAYs5gf4OAH1EswIVOoHgQH8PQWgVgIKwm8OxB4cori3JOCslV-SBWsSinU4ApQ15gCUSQ-V4JukAEFfDNmfKgV1ZA3XNEqHAeAZB1REAeGmqSBAtBpGif4CCnTunYkGb4IgIcIBQigPwfgmdaxiSMLofYuJNCrFGSFW4tZiD+GtaUM4dgoC6E5WASt3TxliTSbKXc64AG3F+OctQBQWjOomZwZ8wQuQokYKgAEBBcT+FYMHDAEFx30GLaWhUw7ODeN9XuJqYyurKt5Z6kevhjkHzTaaWE0gAA+AA+E6EQMBPthetJ9UhY2qDIQdbC9ynUur6Q4cQnqZzUuAShmymznUMH3rGcQt772aDSN4eDeHBSJTeqoaiaBUDQloL8KyirihSreNQV1Is+P4n6DAUgBALAixE2J420c8oSdfo5Y4n0Q0-V8Hy+ypRhC-vdopr6atfqwkxO4HeBBwZMpFirIzXhlMqhJVGJTv61OYhlAwV9pmNIy2VmLRcS7nHWbYrZ9VumTWOdlSpRiJnG4z087DOiDEmJ+ZCJiKNRDhQuA6dQfghrnPWl8eC-crhOq6ATegcQLHsIun6GV6+9B3pgAFAooAA" width="150%" height="800px" data-external="1" style="position: relative; z-index:1">
</iframe>
</div>
</div>
<div class="section level3">
<h3 id="transforming-multiple-outputs-decorators">Transforming Multiple Outputs (Decorators)<a class="anchor" aria-label="anchor" href="#transforming-multiple-outputs-decorators"></a>
</h3>
<p>Here we will apply transformation to two outputs in one module.</p>
<div class="section level4">
<h4 id="transformators">Transformators<a class="anchor" aria-label="anchor" href="#transformators"></a>
</h4>
<p>The plot transformators adds a user-provided title to a
<code>ggplot2</code> object.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot_decorator</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/teal_transform_module.html">teal_transform_module</a></span><span class="op">(</span></span>
<span>  label <span class="op">=</span> <span class="st">"Decorate plot"</span>,</span>
<span>  ui <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textInput.html" class="external-link">textInput</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"plot_title"</span><span class="op">)</span>, <span class="st">"Plot Title"</span>, value <span class="op">=</span> <span class="st">"Title (editable)"</span><span class="op">)</span></span>
<span>  <span class="op">}</span>,</span>
<span>  server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="fu"><a href="../reference/teal_data_module.html">within</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>          <span class="op">{</span></span>
<span>            <span class="va">plot</span> <span class="op">&lt;-</span> <span class="va">plot</span> <span class="op">+</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="va">ptitle</span><span class="op">)</span> <span class="op">+</span></span>
<span>              <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>              <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>                plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fl">30</span>, color <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span>
<span>              <span class="op">)</span></span>
<span>          <span class="op">}</span>,</span>
<span>          ptitle <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">plot_title</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The table transformators adds a column to a
<code>data.frame</code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">table_decorator</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/teal_transform_module.html">teal_transform_module</a></span><span class="op">(</span></span>
<span>  label <span class="op">=</span> <span class="st">"Decorate table"</span>,</span>
<span>  ui <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="fu">shiny</span><span class="fu">::</span><span class="va"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">tags</a></span><span class="op">$</span><span class="fu">p</span><span class="op">(</span><span class="st">"No UI needed for table decorator and could be ommited."</span><span class="op">)</span>,</span>
<span>  server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="fu"><a href="../reference/teal_data_module.html">within</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span>, <span class="op">{</span></span>
<span>          <span class="va">table_data</span><span class="op">[[</span><span class="st">"Added by decorator"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Row "</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">table_data</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="module-1">Module<a class="anchor" aria-label="anchor" href="#module-1"></a>
</h4>
<p>The following module uses <code>ggplot2</code> to generate a scatter
plot, and presents a simple <code>data.frame</code> as a summary table.
Code for both outputs is also displayed.</p>
<p>Note that the module constructor accepts one list of transformations
and the transformations are then manually separated in the module
functions.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tm_decorated_plot_table</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">label</span> <span class="op">=</span> <span class="st">"module with two outputs"</span>, <span class="va">decorators</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">checkmate</span><span class="fu">::</span><span class="fu"><a href="https://mllg.github.io/checkmate/reference/checkList.html" class="external-link">assert_list</a></span><span class="op">(</span><span class="va">decorators</span>, <span class="st">"teal_transform_module"</span>, null.ok <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="../reference/teal_modules.html">module</a></span><span class="op">(</span></span>
<span>    label <span class="op">=</span> <span class="va">label</span>,</span>
<span>    ui_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>decorators <span class="op">=</span> <span class="va">decorators</span><span class="op">)</span>,</span>
<span>    server_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>decorators <span class="op">=</span> <span class="va">decorators</span><span class="op">)</span>,</span>
<span>    ui <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">decorators</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html" class="external-link">selectInput</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"dataname"</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"Select dataset"</span>, choices <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html" class="external-link">selectInput</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"x"</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"Select x-axis"</span>, choices <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html" class="external-link">selectInput</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"y"</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"Select y-axis"</span>, choices <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>,</span>
<span></span>
<span>        <span class="co"># Separately inject UI for plot and table decorators</span></span>
<span>        <span class="fu"><a href="../reference/module_transform_data.html">ui_transform_teal_data</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"decorate_plot"</span><span class="op">)</span>, transformators <span class="op">=</span> <span class="va">decorators</span><span class="op">$</span><span class="va">plot</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="../reference/module_transform_data.html">ui_transform_teal_data</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"decorate_table"</span><span class="op">)</span>, transformators <span class="op">=</span> <span class="va">decorators</span><span class="op">$</span><span class="va">table</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/plotOutput.html" class="external-link">plotOutput</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"plot"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderTable.html" class="external-link">tableOutput</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"table"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textOutput.html" class="external-link">verbatimTextOutput</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"text"</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">data</span>, <span class="va">decorators</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span>, <span class="op">{</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/updateSelectInput.html" class="external-link">updateSelectInput</a></span><span class="op">(</span>inputId <span class="op">=</span> <span class="st">"dataname"</span>, choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>        <span class="va">dataname</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">dataname</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="fu">dataname</span><span class="op">(</span><span class="op">)</span>, <span class="op">{</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/updateSelectInput.html" class="external-link">updateSelectInput</a></span><span class="op">(</span>inputId <span class="op">=</span> <span class="st">"x"</span>, choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="va">input</span><span class="op">$</span><span class="va">dataname</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/updateSelectInput.html" class="external-link">updateSelectInput</a></span><span class="op">(</span>inputId <span class="op">=</span> <span class="st">"y"</span>, choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="va">input</span><span class="op">$</span><span class="va">dataname</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span>        <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">x</span>, <span class="va">input</span><span class="op">$</span><span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="fu">dataname</span><span class="op">(</span><span class="op">)</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>          <span class="va">input</span><span class="op">$</span><span class="va">x</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span>        <span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">y</span>, <span class="va">input</span><span class="op">$</span><span class="va">y</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="fu">dataname</span><span class="op">(</span><span class="op">)</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>          <span class="va">input</span><span class="op">$</span><span class="va">y</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>        <span class="co"># Separately create outputs within teal_data objects in separate reactive expressions</span></span>
<span>        <span class="va">plot_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="fu">dataname</span><span class="op">(</span><span class="op">)</span>, <span class="fu">x</span><span class="op">(</span><span class="op">)</span>, <span class="fu">y</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>          <span class="fu"><a href="../reference/teal_data_module.html">within</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>            <span class="op">{</span></span>
<span>              <span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">dataname</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">xvar</span>, y <span class="op">=</span> <span class="va">yvar</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>                <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span></span>
<span>            <span class="op">}</span>,</span>
<span>            dataname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/name.html" class="external-link">as.name</a></span><span class="op">(</span><span class="fu">dataname</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>            xvar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/name.html" class="external-link">as.name</a></span><span class="op">(</span><span class="fu">x</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>            yvar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/name.html" class="external-link">as.name</a></span><span class="op">(</span><span class="fu">y</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span>        <span class="va">table_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="fu">dataname</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>          <span class="fu"><a href="../reference/teal_data_module.html">within</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>            <span class="op">{</span></span>
<span>              <span class="va">table_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">dataname</span>, <span class="va">mean</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span>            <span class="op">}</span>,</span>
<span>            dataname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/name.html" class="external-link">as.name</a></span><span class="op">(</span><span class="fu">dataname</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>        <span class="co"># Separately apply decoration to the outputs</span></span>
<span>        <span class="va">decorated_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/module_transform_data.html">srv_transform_teal_data</a></span><span class="op">(</span></span>
<span>          <span class="st">"decorate_plot"</span>,</span>
<span>          data <span class="op">=</span> <span class="va">plot_data</span>,</span>
<span>          transformators <span class="op">=</span> <span class="va">decorators</span><span class="op">$</span><span class="va">plot</span></span>
<span>        <span class="op">)</span></span>
<span>        <span class="va">decorated_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/module_transform_data.html">srv_transform_teal_data</a></span><span class="op">(</span></span>
<span>          <span class="st">"decorate_table"</span>,</span>
<span>          data <span class="op">=</span> <span class="va">table_data</span>,</span>
<span>          transformators <span class="op">=</span> <span class="va">decorators</span><span class="op">$</span><span class="va">table</span></span>
<span>        <span class="op">)</span></span>
<span></span>
<span>        <span class="va">output</span><span class="op">$</span><span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html" class="external-link">renderPlot</a></span><span class="op">(</span><span class="fu">decorated_plot</span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="st">"plot"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>        <span class="va">output</span><span class="op">$</span><span class="va">table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderTable.html" class="external-link">renderTable</a></span><span class="op">(</span><span class="fu">decorated_table</span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="st">"table_data"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span>        <span class="va">output</span><span class="op">$</span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPrint.html" class="external-link">renderText</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="va">plot_code</span> <span class="op">&lt;-</span> <span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="https://insightsengineering.github.io/teal.code/latest-tag/reference/get_code.html">get_code</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="fu">decorated_plot</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>          <span class="va">table_code</span> <span class="op">&lt;-</span> <span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="https://insightsengineering.github.io/teal.code/latest-tag/reference/get_code.html">get_code</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="fu">decorated_table</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"# Plot Code:"</span>, <span class="va">plot_code</span>, <span class="st">"\n\n# Table Code:"</span>, <span class="va">table_code</span><span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="application-1">Application<a class="anchor" aria-label="anchor" href="#application-1"></a>
</h4>
<p>Note that a named list of transformations is passed to the module
constructor.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/init.html">init</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/teal_data.html">teal_data</a></span><span class="op">(</span>iris <span class="op">=</span> <span class="va">iris</span>, mtcars <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu"><a href="../reference/teal_modules.html">modules</a></span><span class="op">(</span></span>
<span>    <span class="fu">tm_decorated_plot_table</span><span class="op">(</span></span>
<span>      <span class="st">"plot_and_table"</span>,</span>
<span>      decorators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        plot <span class="op">=</span> <span class="va">plot_decorator</span>,</span>
<span>        table <span class="op">=</span> <span class="va">table_decorator</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<iframe src="https://shinylive.io/r/app/#code=NobwRAdghgtgpmAXGKAHVA6ASmANGAYwHsIAXOMpMASzLgCcoDTqA3OAAgB4BaDgMwCuEZtRIAKAJQcAKlgCqAUQA6EADbUARo3oBPceShrJqjdqh7xAcyuo1RUgCYTEOw4D6AEzjFGpIvTcfIZq7qSMEADO-AEw7jBEnoJqcOKqHBxqUJpwahwAvBzKYAAiPgFQ5BxupMW46RyC1AUCwqIS1J7SIA0ZUUEcAHIAyuKdLhkZ5AAepACSroKk4lFpYDVh1KQpxZK4RWAACvaksls7eBysRoKchcUy55zicJ5b2SkmYBMcAL71EAykQY7EChSEIhYHU8+08lSg3V6HASSRSwxBDDGMNakLEEDGi1I+yIS1QS32wMikTxiMBkwy9DgTBY7HEPTp9IZcAAjuI4aQoFIfpyOAB3LYAC1ofPhUgBIvp7IVnJqA1VAGoODYao5EIgbCxtqlUIbPhx1UjlRltSddYhSBK4PB4rRqDAjFJzZarTaHHaHU7Ut6rdUThhTXcOLlA2QwnBZuJ+ExI8VNEQ1J46hxqQAvSMAZgADPtiPYwQdNGpbrtgwrhQr-rWMiani1aGTSAASDYR2v1jK-euDhq-VQuAWVuBecp+AIDEJhCLRWLxRLJIN0rI5PL3UozyqcCcXeWNZrgtpQ-HjbNSiC6PUCqyRbtrQZEDjyOYcCBwV6vARzkenDeL4lRzlAECeBwxDJFBOQcEQMAwFsrwYLsJ7AvQoItBC7RXti-IIhwSqTCi67olhmKdPsuGXgSHbEqS5LZnAVI0sR3qMsybCpCRIqMryhFCrW4oOtKQl7BxHIKkBXjwsAwDFAAgp43hwboHAgRU-j0MUAC6elqlAkTkIWaxYEQooHBSPLuCk+IQPQlkGB8U6EZIHm1sO0kDkOPyjhA45xFpfivO4PauQMtF4uIW65C0xRkSkYqShwpCiu+JKkB2kRZiFYH0JELQaCZQpSRkBCOgQADW7rkHqxmYaQdnUKV+U6ZE+zFAu4QQcu9BxElcBZhAyRqBgRDVS0chKC4DRDWk0lxTumTZLkJ4ZE07gWE+xWtcs7UBEVhSHYVexIphoLbfQu2FCVB37h1LSnZE53SU0OEXjF1GaY9R20iK-S8EMozjN6bysItyrAikzALB2KyRGshHQPA6GrduCVgOisOnIRwK1JclVENQBCsS0gzyAAMlTb3Q9GcOEojazTOjy1YzjPinNMPBQNMrVZsTpPk4UlM03TCow1z8NLMzxS6Gza0rcUnPMBwui8-zuVExKJNk8dQzU7TAK1gAxBw6KoBYB5qBptAAFZcx+X4xIEqoQVBQG-aBHW1ltvVRK7cQLkJqzFO1U41OjAf9XVR3PX9hXdicEsiv7S5B3GRhyQKctgBHYSudHGexAVBsvZ2QGpyqJwAPJMcsYfrCcuzV-SQH19lstN0BrcbZyoKaJUboyPGpCdwjPdj633pDv3l0MJ9uLQrC8Kwonr3lZyQ0UaCWI0V9HSEoxXdEixbEkADCpEJoC+KOwZAyrnkl8QqgioPycCq-MTPtkscxQV3CjWAw0dZ6xFt+EBSMJKeR8pMbytZgHwAGFxUQrIBL0SWJ2JBcBYG1hvnfB+B14So1SC-JsjQP4Hm-jLZYf95iAIOKzMBwsDallIdA2UkgFL0OwSQkBBlYEhnfp-Ghv9CQAKxgrFh+sWjsKgU-QU3DgC8JwYI-s8CNEZGmCgpkaDeIUIwbw6Y+xjEcAAKS0HMdBdMHDFFSAUjgqQ6iKHGK8lo9WujuKslfvxHkmCuy6FMYSTsGlLEQGsfI+AnDn6OP4fAZxekhFWl4QrOBvlVBmwtnAK2oVbbQS4lULKOUUpiUBCHeECFNCO2YEVWgLFckHg4KglknB4yoEZBfKItYNiES8fotkhj-FOMktMOU6thLpMmKJW89i24Kl8VaVUwNfROD1KsxRpD9irLtFAVi4gdGFGmNceg+wNKFF0CcjyXopnKh2esuAiFwok0fh4+kjZbmTBwS0YyGBSGbJAUKfuypjkWB+ZEP5gKxkeWBQqS5YLCi-P+foZJyoPHeWVLJPpwMWk8UGZ8jBIy3mlNmRJWFIpFmYtcjnKAAxCIYH4IwBJWR0C2wBfAfY8AIL7GgBgAa00FCKFRVaD5IYMjfMRRC-5RKKHormlM82ltrbkHyWgOwGl2p4jSu+AMCEG65SmRHTw4UTgDEiFhRcfVM4VNzhQ8Oj1I4tzwBQvphRelrwoTHIOZcE4+yOsnBwfZEEOuNV7YG5rWCWsDiuG1go7X5wdYXScdQXWVMKFij1nyvWlyeidDelci5TPlcqYpWDll8EZJBBgxwHB8hDSa2tyjihRzAII-BDcC2Tl0VW+gMhXJ1p9mFICDjFJgAzQKfSSTMlTNLV2GYpwcUUG8L2se+KQwbGIN4ecTJxqbrgA85qe7xCEvrTUIUxLZJ7u3UYDAe6D3uCPSewdob+0eWJVbEyQYwDmxracAAwokfdWYN2Aa6mAZQmTVDmz7V2gD3hEBZkvYBuV3oMXwIaC4AKaqBiumWA0V1aUd00rGPQVqbZSOdWRKQAgFgDYwGo7RiWQ06NrhSEjJEpBgqnpOEmlIUNOTNp4x7XjoDYUvT2qVHppq3U8dOuStKkV03UtOrPJEPwXDyuoPwDgBJyCMAGdckikRby6CUugcQarOxNH2JZhe9BMNgF+HpIAA" width="150%" height="800px" data-external="1" style="position: relative; z-index:1">
</iframe>
</div>
</div>
</div>
<div class="section level2">
<h2 id="convenience">Convenience<a class="anchor" aria-label="anchor" href="#convenience"></a>
</h2>
<p>Here we present some ways to work with transformators more
conveniently. These are purely optional.</p>
<div class="section level3">
<h3 id="reducing-boilerplate">Reducing Boilerplate<a class="anchor" aria-label="anchor" href="#reducing-boilerplate"></a>
</h3>
<p>The function <code>make_teal_transform_server</code> can be used to
reduce the amount of boilerplate code when writing new transformators.
It takes <code>language</code> as input and requires you to use
<code>input</code> object names directly in the expression. The
following calls yield the same transformator module. Note that the
combination of <code>my_title = input$x_axis_title</code> and
<code>xlab(my_title)</code> is replaced by a simple
<code>xlab(x_axis_table)</code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/teal_transform_module.html">teal_transform_module</a></span><span class="op">(</span></span>
<span>  label <span class="op">=</span> <span class="st">"Static decorator"</span>,</span>
<span>  ui <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textInput.html" class="external-link">textInput</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"x_axis_title"</span><span class="op">)</span>, <span class="st">"X axis title"</span>, value <span class="op">=</span> <span class="st">"x axis"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span>,</span>
<span>  server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="fu"><a href="../reference/teal_data_module.html">within</a></span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>          <span class="op">{</span></span>
<span>            <span class="va">plot</span> <span class="op">&lt;-</span> <span class="va">plot</span> <span class="op">+</span> <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"This is a better title"</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="va">x_axis_title</span><span class="op">)</span></span>
<span>          <span class="op">}</span>,</span>
<span>          x_axis_title <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">x_axis_title</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/teal_transform_module.html">teal_transform_module</a></span><span class="op">(</span></span>
<span>  label <span class="op">=</span> <span class="st">"Static decorator (language)"</span>,</span>
<span>  ui <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textInput.html" class="external-link">textInput</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"x_axis_title"</span><span class="op">)</span>, <span class="st">"X axis title"</span>, value <span class="op">=</span> <span class="st">"x axis"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span>,</span>
<span>  server <span class="op">=</span> <span class="fu"><a href="../reference/make_teal_transform_server.html">make_teal_transform_server</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span></span>
<span>      <span class="va">plot</span> <span class="op">&lt;-</span> <span class="va">plot</span> <span class="op">+</span> <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"This is a better title"</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="va">x_axis_title</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="multiple-transformations">Multiple Transformations<a class="anchor" aria-label="anchor" href="#multiple-transformations"></a>
</h3>
<p>Consider these constructs to accommodate an arbitrary number of
transformators in your module. Note that with this method all
decorations will be applied to one output.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># in the module UI function</span></span>
<span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"deorator_container"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">decorators</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">decorator_name</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>      id <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"decorate_"</span>, <span class="va">decorator_name</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="../reference/module_transform_data.html">ui_transform_teal_data</a></span><span class="op">(</span></span>
<span>        <span class="fu">ns</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"decorate_"</span>, <span class="va">decorator_name</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        transformators <span class="op">=</span> <span class="va">decorators</span><span class="op">[[</span><span class="va">decorator_name</span><span class="op">]</span><span class="op">]</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># in the module server function</span></span>
<span><span class="va">output_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/teal_data.html">teal_data</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">decorations</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">decorators</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">decorator_name</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">function</span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/module_transform_data.html">srv_transform_teal_data</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"decorate_"</span>, <span class="va">decorator_name</span><span class="op">)</span>,</span>
<span>      data <span class="op">=</span> <span class="va">data</span>,</span>
<span>      transformators <span class="op">=</span> <span class="va">decorators</span><span class="op">[[</span><span class="va">decorator_name</span><span class="op">]</span><span class="op">]</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="va">output_data_decorated</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Reduce</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">f</span>, <span class="va">...</span><span class="op">)</span> <span class="fu">f</span><span class="op">(</span><span class="va">...</span><span class="op">)</span>, <span class="va">decorations</span>, init <span class="op">=</span> <span class="va">output_data</span>, right <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="nest">
  <p>teal is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer>
</div>





  </body>
</html>
