% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/module_transform_data.R
\name{module_transform_data}
\alias{module_transform_data}
\alias{srv_transform_teal_data}
\alias{ui_transform_teal_data}
\title{Apply \code{teal_transform_module} decorators to reactive \code{teal_data}}
\usage{
srv_transform_teal_data(
  id,
  data,
  transformators,
  modules = NULL,
  is_transform_failed = reactiveValues(),
  expr
)

ui_transform_teal_data(id, transformators, class = "well", ...)
}
\arguments{
\item{id}{(\code{character(1)}) \code{shiny} module instance id.}

\item{data}{(\code{teal_data}, \code{teal_data_module}, or \code{reactive} returning \code{teal_data})
The data which application will depend on.}

\item{transformators}{(\code{list} of \code{teal_transform_module}) decorator modules to apply sequentially
to \code{data}. Each transformator receives the output of the previous one as input.}

\item{modules}{\ifelse{html}{\href{https://lifecycle.r-lib.org/articles/stages.html#deprecated}{\figure{lifecycle-deprecated.svg}{options: alt='[Deprecated]'}}}{\strong{[Deprecated]}} No longer used.}

\item{is_transform_failed}{\ifelse{html}{\href{https://lifecycle.r-lib.org/articles/stages.html#deprecated}{\figure{lifecycle-deprecated.svg}{options: alt='[Deprecated]'}}}{\strong{[Deprecated]}} No longer used.}

\item{expr}{(\code{expression} or \code{reactive}) optional expression evaluated on top of the decorated
output. Useful for post-processing after all transformators have run.}

\item{class}{\ifelse{html}{\href{https://lifecycle.r-lib.org/articles/stages.html#deprecated}{\figure{lifecycle-deprecated.svg}{options: alt='[Deprecated]'}}}{\strong{[Deprecated]}} No longer used.}

\item{...}{additional arguments passed to \code{.ui_transform_teal_data} (e.g. \code{class}).}
}
\value{
\code{reactive} \code{teal_data}

A \code{list} of \code{bslib::accordion} UI elements, one per transformator, or \code{NULL} if
\code{transformators} is empty.
}
\description{
Shiny module pair (\code{srv_transform_teal_data} / \code{ui_transform_teal_data}) that runs a sequence
of \code{\link[=teal_transform_module]{teal_transform_module()}} decorators against a reactive \code{teal_data} object.
Decorators are applied one after another via \code{Reduce}, so each one receives the output of the
previous as its \code{data} argument.
Failed transformators are tracked and any downstream transformator is automatically disabled
until the failure is resolved.
An optional \code{expr} argument allows additional code to be evaluated on the final decorated output.
}
\examples{
library(shiny)
library(teal.data)

# A decorator that sets a fixed title on a ggplot2 object named `plot`
static_decorator <- teal_transform_module(
  label = "Static decorator",
  server = function(id, data) {
    moduleServer(id, function(input, output, session) {
      reactive({
        req(data())
        within(data(), {
          plot <- plot + ggplot2::ggtitle("Decorated title")
        })
      })
    })
  }
)

if (interactive()) {
  shinyApp(
    ui = fluidPage(
      ui_transform_teal_data("decorate", transformators = list(static_decorator)),
      plotOutput("plot")
    ),
    server = function(input, output, session) {
      data <- reactive(
        teal_data(
          plot = ggplot2::ggplot(iris, ggplot2::aes(Sepal.Length, Sepal.Width)) +
            ggplot2::geom_point()
        )
      )
      decorated <- srv_transform_teal_data(
        "decorate",
        data = data,
        transformators = list(static_decorator)
      )
      output$plot <- renderPlot(decorated()[["plot"]])
    }
  )
}
}
