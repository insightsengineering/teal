---
title: "Quick usage guide for teal"
author: "NEST CoreDev"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Quick usage guide for teal}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

## `init` to initialize your app

The `init` function is the entrypoint to create a `teal` application.
The main arguments of `init` are `data` and `modules`, which are mandatory. Additionally, the `filter` argument allows the user to specify the default filter state of the filter panel.

* The `data` argument takes a `teal_data` object, please refer to [Including Data in teal Applications vignette](including-data-in-teal-applications.html) to learn more.
* The `modules` argument takes a nested list of `teal_modules` or `teal_module` objects or a single `teal_modules` or `teal_module` object. The packages like [`teal.modules.general`](https://insightsengineering.github.io/teal.modules.general/) or [`teal.modules.clinical`](https://insightsengineering.github.io/teal.modules.clinical/) contain a collection of thess modules that can be used in your `teal` application.
* The `filter` argument takes an object of class `teal_slices`, please refer the [Filter Panel vignette](filter-panel.html) to learn more.

## A simple `teal` application:

This simple `teal` application takes the `iris` and `mtcars` datasets and displays their contents:

```{r, message=FALSE}
library(teal)

app <- init(
  data = teal_data(IRIS = iris, MTCARS = mtcars),
  modules = modules(
    example_module("Module 1")
  ),
  filter = teal_slices(
    teal_slice(dataname = "IRIS", varname = "Species", selected = "setosa")
  )
)

if (interactive()) {
  shinyApp(app$ui, app$server)
}
```

<span>
  <img class="teal-example" src="images/teal-app-init.svg" alt="Simple teal app to showcase `init`" style="width: 100%;" />
</span>

## Extending the `teal` application

The following functions can be used to extend the `teal` application:

* `modify_title` to change the title of the application
* `modify_header` to change the header of the application
* `modify_footer` to change the footer of the application
* `add_landing_popup` to add a landing popup to the application
* `add_custom_server` to add custom server logic to the application

Let's use these mopdifiers to customize the application we created earlier.

```{r, message=FALSE}
library(teal)

app <- init(
  data = teal_data(IRIS = iris, MTCARS = mtcars),
  modules = modules(
    example_module("Module 1")
  ),
  filter = teal_slices(
    teal_slice(dataname = "IRIS", varname = "Species", selected = "setosa")
  )
) |>
  modify_title(title = "Custom title") |>
  modify_header(
    header = tags$div(
      h3("Header with a button that can be observed!"),
      actionButton("notify", "Show notification")
    )
  ) |>
  modify_footer(footer = "Custom footer") |>
  add_landing_popup(title = "Teal", content = "Welcome to my first teal application!") |>
  add_custom_server(function(input, output, session) {
    observeEvent(input$notify, {
      showNotification("Yes, the button works!")
    })
  })

if (interactive()) {
  shinyApp(app$ui, app$server)
}
```

<span>
  <img class="teal-example" src="images/teal-app-init-with-modifiers.svg" alt="Simple teal app to showcase the modifier functions" style="width: 100%;" />
</span>


Note the changes made by these extensions:

* `modify_title` changed the title that appears in the browser tab.
* `modify_header` adds a header with a button that shows a notification when clicked, but note that the observer for this button was added using the modifier `add_custom_server`.
* `modify_footer` adds a custom footer.
* `add_landing_popup` adds a landing popup that appears when the application is first loaded. Note that the screenshot does not show the popup, but it will appear when the application is first loaded.
* `add_custom_server` observed the button created in the header and shows a notification when it is clicked.
