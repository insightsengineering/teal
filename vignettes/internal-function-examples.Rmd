---
title: "Examples for Internal Functions"
author: "NEST CoreDev"
output: 
  rmarkdown::html_vignette:
    toc: true
vignette: >
  %\VignetteIndexEntry{Examples for Internal Functions}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

## Introduction

This vignette contains examples for internal classes, methods, and functions of  `teal`. 
For developer use only.


## `module_teal`
```{r eval=FALSE}
mods <- teal:::example_modules()
teal_data_rv <- reactive(teal:::example_cdisc_data())

ui <- function() {
  teal:::ui_teal("dummy")
}

server <- function(input, output, session) {
  active_module <- teal:::srv_teal(id = "dummy", modules = mods, teal_data_rv = teal_data_rv)
}

if (interactive()) {
  shinyApp(ui, server)
}
```

## `module_nested_tabs`

```{r eval=FALSE}
mods <- teal:::example_modules()
datasets <- teal:::example_datasets()

ui <-function() {
  tagList(
    teal:::include_teal_css_js(),
    textOutput("info"),
    fluidPage( # needed for nice tabs
      teal:::ui_nested_tabs("dummy", modules = mods, datasets = datasets)
    )
  )
}
server <- function(input, output, session) {
  active_module <- teal:::srv_nested_tabs(
    "dummy",
    datasets = datasets,
    modules = mods
  )
  output$info <- renderText({
    paste0("The currently active tab name is ", active_module()$label)
  })
}
if (interactive()) {
  shinyApp(ui, server)
}
```



## `module_tabs_with_filters`
```{r eval=FALSE}
mods <- teal:::example_modules()
datasets <- teal:::example_datasets()

ui <- function() {
  tagList(
    teal:::include_teal_css_js(),
    textOutput("info"),
    fluidPage( # needed for nice tabs
      ui_tabs_with_filters("dummy", modules = mods, datasets = datasets)
    )
  )
}
server <- function(input, output, session) {
  output$info <- renderText({
    paste0("The currently active tab name is ", active_module()$label)
  })
  active_module <- srv_tabs_with_filters(id = "dummy", datasets = datasets, modules = mods)
}

if (interactive()) {
  shinyApp(ui, server)
}
```
## Functions
### `filter_calls_module`
```{r eval=FALSE}
app <- init(
  data = teal_data(iris = iris, mtcars = mtcars),
  modules = teal:::filter_calls_module(),
  header = "Simple teal app"
)
if (interactive()) {
  shinyApp(app$ui, app$server)
}
```

### `modules_depth`
```{r eval=FALSE}
mods <- modules(
  label = "d1",
  modules(
    label = "d2",
    modules(
      label = "d3",
      module(label = "aaa1"), module(label = "aaa2"), module(label = "aaa3")
    ),
    module(label = "bbb")
  ),
  module(label = "ccc")
)
stopifnot(teal:::modules_depth(mods) == 3L)

mods <- modules(
  label = "a",
  modules(
    label = "b1", module(label = "c")
  ),
  module(label = "b2")
)
stopifnot(teal:::modules_depth(mods) == 2L)
```
